<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!-- Primary Meta Tags -->
        <title>
            {% block title %}{{ page_title }}{% endblock %} | {{ site_name }}
        </title>
        <meta
            name="title"
            content="{% block meta_title %}{{ page_title }} | {{ site_name }}{% endblock %}"
        />
        <meta
            name="description"
            content="{% block description %}{{ meta_description }}{% endblock %}"
        />
        <meta
            name="keywords"
            content="{% block keywords %}{{ meta_keywords }}{% endblock %}"
        />
        <meta name="author" content="{{ site_name }}" />
        <meta name="robots" content="index, follow" />
        <link rel="canonical" href="{{ canonical_url }}" />

        <!-- Open Graph / Facebook -->
        <meta
            property="og:type"
            content="{% block og_type %}website{% endblock %}"
        />
        <meta property="og:url" content="{{ canonical_url }}" />
        <meta
            property="og:title"
            content="{% block og_title %}{{ page_title }} | {{ site_name }}{% endblock %}"
        />
        <meta
            property="og:description"
            content="{% block og_description %}{{ meta_description }}{% endblock %}"
        />
        <meta
            property="og:image"
            content="{% block og_image %}{{ og_image }}{% endblock %}"
        />
        <meta property="og:site_name" content="{{ site_name }}" />
        <meta property="og:locale" content="en_US" />

        <!-- Twitter -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:url" content="{{ canonical_url }}" />
        <meta
            name="twitter:title"
            content="{% block twitter_title %}{{ page_title }} | {{ site_name }}{% endblock %}"
        />
        <meta
            name="twitter:description"
            content="{% block twitter_description %}{{ meta_description }}{% endblock %}"
        />
        <meta
            name="twitter:image"
            content="{% block twitter_image %}{{ og_image }}{% endblock %}"
        />

        <!-- Structured Data -->
        <script type="application/ld+json">
            {% block structured_data %}
            {
                "@context": "https://schema.org",
                "@type": "WebSite",
                "name": "{{ site_name }}",
                "url": "{{ base_url }}",
                "description": "{{ meta_description }}"
            }
            {% endblock %}
        </script>

        <!-- Favicon -->
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link
            rel="apple-touch-icon"
            sizes="180x180"
            href="/apple-touch-icon.png"
        />

        <!-- Preconnect for performance -->
        <link rel="preconnect" href="{{ base_url }}" />

        {% block head %}{% endblock %}

        <style>
            {% block styles %}
            *, *::before, *::after {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }

            html {
                font-size: 16px;
                scroll-behavior: smooth;
            }

            body {
                font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                line-height: 1.6;
                color: #1a1a1a;
                background: #fafafa;
                min-height: 100vh;
                display: flex;
                flex-direction: column;
            }

            main {
                flex: 1;
            }

            a {
                color: inherit;
                text-decoration: none;
            }

            img {
                max-width: 100%;
                height: auto;
                display: block;
            }
            {% endblock %}
        </style>
    </head>
    <body>
        <a
            href="#main-content"
            class="skip-link"
            style="
                position: absolute;
                left: -9999px;
                top: auto;
                width: 1px;
                height: 1px;
                overflow: hidden;
                z-index: 9999;
            "
            >Skip to main content</a
        >

        <header role="banner">
            {% block header %}
            <nav role="navigation" aria-label="Main navigation">
                <!-- Navigation content -->
            </nav>
            {% endblock %}
        </header>

        <main id="main-content" role="main">
            {% block content %}{% endblock %}
        </main>

        <footer role="contentinfo">
            {% block footer %}
            <p>
                &copy; {{ current_year }} {{ site_name }}. All rights reserved.
            </p>
            {% endblock %}
        </footer>

        {% block scripts %}{% endblock %}
    </body>
</html>
